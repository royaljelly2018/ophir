<?php
include_once("/var/www/_templates/config/public/config-medicare.php");
?>

<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" description="noindex,nofollow,noarchive">
  <title>Meet Seniors</title>
  <meta name="description" content="Call in to find out if you qualify." />
  <meta name="keywords" content="Affordable Care Act, ACA" />
  <link href="assets/css/style.css" rel="stylesheet" media="all" />
  <style>
    .typing-animation {
      display: inline-flex;
      align-items: center;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      background-color: #a7a7a7;
      border-radius: 50%;
      margin-right: 4px;
      animation: typing 1s infinite;
    }

    @keyframes typing {
      0% {
        opacity: 0.3;
        transform: scale(1);
      }

      50% {
        opacity: 1;
        transform: scale(1.05);
      }

      100% {
        opacity: 0.3;
        transform: scale(1);
      }
    }
  </style>
  <script src="https://cdn.tailwindcss.com"></script>

</head>

<body>
  <a href="https://cdn.sppoints.xyz/click" style="display: none" id="rtRef"></a>
  <input id="hdnApprovalStatus" type="hidden" />

  <main class="min-h-screen">
    <div class="max-w-4xl mx-auto bg-white text-center text-gray-600">
      <div class="p-4">
        <p class="font-serif text-md sm:text-lg font-bold mt-2">
          <span class="text-red-600">Warning:</span> Enrollment closes on
          <span id="currentDate">Tuesday, 07/11/2023</span> at midnight.
        </p>
        <h2 class="font-bold text-xl sm:text-3xl mt-1">
          Meet Seniors is currently accepting eligible singles that are looking for a committed long term relationship.
        </h2>
      </div>
      <div class="w-full md:col-span-1 text-center block">
        <div class="text-sm flex items-center justify-center">
          <span class="relative flex h-4 w-4 inline-flex mr-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 bg-green-500"></span>
            <span class="relative inline-flex rounded-full h-4 w-4 bg-green-500"></span>
          </span>
           Meet-Seniors.com is Online.
        </div>
      </div>
    </div>

    <div class="max-w-md mx-auto bg-white">
      <div class="p-4">
        <div class="space-y-4">
          <div class="chat-container pb-2">
            <!-- Agent message -->
            <div id="agentBlock1" class="flex items-end w-5/6">
              <div class="flex-shrink-0">
                <img class="w-8 h-8 rounded-full" src="assets/img/agent.jpg" alt="Sender Avatar" />
              </div>
              <div class="ml-3 agent-chat">
                <div id="initTyping" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 inline-block">
                  <div class="typing-animation">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                  </div>
                </div>
                <div id="msg1" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">Hi üëã</p>
                </div>
                <div id="msg2" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">Welcome to Meet-Seniors.com</p>
                </div>
                <div id="msg3" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">
                    Are you interested in meeting Seniors looking for a relationship near Los Angeles? (Note to Ophir: Can have a dynamic city tag here)
                  </p>
                </div>
                <div id="msg4" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <div class="">
                    <button class="chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-12" type="button" data-form-step="1" data-form-value="Yes">
                      Yes
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- User message -->
            <div id="userBlock1" class="flex items-start justify-end pt-4 hidden">
              <div class="mr-3 receiver-chat">
                <div id="msg5" class="bg-blue-500 text-white p-3 rounded-lg shadow-xs mt-2 inline-block">
                  <p class="text-md">Yes</p>
                </div>
              </div>
              <div class="flex-shrink-0">
                <img class="w-8 h-8 rounded-full" src="assets/img/profile.png" alt="Receiver Avatar" />
              </div>
            </div>

            <!-- Agent message -->
            <div id="agentBlock2" class="flex items-end w-5/6 hidden pt-4">
              <div class="flex-shrink-0">
                <img class="w-8 h-8 rounded-full" src="assets/img/agent.jpg" alt="Sender Avatar">
              </div>
              <div class="ml-3 agent-chat">
                <div id="msg6" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">
                    Okay, let me ask you two quick questions.
                  </p>
                </div>
                <div id="msg7" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">
                    What is your age range?
                  </p>
                </div>
                <div id="msg8" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <div class="grid grid-rows-1 grid-cols-1 gap-y-3">
                    <button class="chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-8" type="button" data-form-step="2" data-form-value="under">
                      50 - 60
                    </button>
                    <button class="chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-8" type="button" data-form-step="2" data-form-value="over">
                      61 and Older
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- User message -->
            <div id="userBlock2" class="flex items-start justify-end hidden">
              <div class="mr-3 receiver-chat">
                <div class="bg-blue-500 text-white p-3 rounded-lg shadow-xs mt-2 inline-block">
                  <p id="msg9yes" class="text-md hidden">50 - 60</p>
                  <p id="msg9no" class="text-md hidden">61 and older</p>
                </div>
              </div>
              <div class="flex-shrink-0">
                <img class="w-8 h-8 rounded-full" src="assets/img/profile.png" alt="Receiver Avatar">
              </div>
            </div>

            <!-- Agent message -->
            <div id="agentBlock3" class="flex items-end w-5/6 hidden pt-4">
              <div class="flex-shrink-0">
                <img class="w-8 h-8 rounded-full" src="assets/img/agent.jpg" alt="Sender Avatar" />
              </div>

              <div class="ml-3 agent-chat">
                <div id="msg10" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">
                    Are you interested in meeting someone in the next 2 weeks?
                  </p>
                </div>
                <div id="msg11" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <div class="grid grid-rows-1 grid-cols-2 gap-x-3">
                    <button class="chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-8 funnel-complete-btn" type="button" data-form-step="3" data-form-value="Yes">
                      Yes
                    </button>
                    <button class="chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-8 funnel-complete-btn" type="button" data-form-step="3" data-form-value="No">
                      No
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- User message -->
            <div id="userBlock3" class="flex items-start justify-end hidden">
              <div class="mr-3 receiver-chat">
                <div class="bg-blue-500 text-white p-3 rounded-lg shadow-xs mt-2 inline-block">
                  <p id="msg12yes" class="text-md hidden">Yes</p>
                  <p id="msg12no" class="text-md hidden">No</p>
                </div>
              </div>
              <div class="flex-shrink-0">
                <img class="w-8 h-8 rounded-full" src="assets/img/profile.png" alt="Receiver Avatar" />
              </div>
            </div>

            <!-- Agent message -->
            <div id="agentBlock4" class="flex items-end w-5/6 hidden pt-4">
              <div class="flex-shrink-0">
                <img class="w-8 h-8 rounded-full" src="assets/img/agent.jpg" alt="Sender Avatar" />
              </div>
              <div class="ml-3 agent-chat">
                <div id="msg13" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">üéâ Congratulations! üéÅ</p>
                </div>
                <div id="msg14" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p id="msg14approved" class="text-md text-gray-800 hidden">
                    Aou're pre-qualified to join Meet-Seniors.com
                  </p>
                  <p id="msg14disapproved" class="text-md text-gray-800 hidden">
                    After signing up you will be routed to the best dating community, specifically tailored singles like you. 
                  </p>
                </div>
                <div id="msg15" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">
                    You will be expected to respond to every elibile message. Please be sure to confirm your email within 2 hours of signing up to be considered active. If you don't, your profile may be hidden and you will not be matched.
                  </p>
                </div>
                <div id="msg16" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p id="msg16approved" class="text-md text-gray-800 hidden">
                    All of our members are real singles, looking for long term relationship, don't let them down.
                  </p>
<a id="msg16disapproved" href="https://www.meet-seniors.com/" class="chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-8 hidden">
    Click Here to Sign Up
</a>

<!--                 </div>
                <div id="msg17" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                <div id="msg17" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800 py-2">
                    <a id="PrimaryNumber" href="https://meet-seniors.com"
                      class="whitespace-nowrap chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-8 hidden ttc-button">
                      Click Here To Sign Up
                    </a>
                    <a id="DownsellNumber" href="tel:"
                      class="chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-8 hidden">
                      Click Here To Sign Up
                    </a>
                  </p>
                </div> -->

                <div id="msg18" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">
                    Sorry, it seems like you are not interested in our dating site. 
                  </p>
                </div>

                <div id="msg19" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <p class="text-md text-gray-800">BUT... you do qualify for the offers below (Ophir: We can redirect to fantasy spin, eDate or something)</p>
                </div>
                <div id="msg20" class="bg-gray-200 p-3 rounded-lg shadow-xs mt-2 w-fit hidden">
                  <button class="chat-button text-white font-bold bg-blue-500 rounded-full py-3 px-12" type="button" onclick="window.location.href='<?php echo $mbOfferSite; ?>'">
                    Sign Up for Edate
                  </button>
                </div>
              </div>
            </div>

            <!-- Disconnect message -->
            <div id="disconnected" class="pt-2 hidden">
              <div class="relative flex py-5 items-center">
                <div class="flex-grow border-t border-gray-200"></div>
                <span class="flex-shrink mx-4 text-gray-300 text-xs">Chat Closed</span>
                <div class="flex-grow border-t border-gray-200"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div id="tcpa" class="pt-2 hidden">
    <div class="mx-auto max-w-7xl overflow-hidden px-6 lg:px-8 text-sm sm:text-md leading-5 sm:leading-6 text-gray-500">
      <div class="tcpa-container text-xs text-center leading-5 text-gray-500"></div>
    </div>
  </div>

  <footer class="bg-gray-100 border-t border-t-1 border-t-gray-200 mt-8">
    <div class="mx-auto max-w-7xl overflow-hidden px-6 py-8 lg:px-8 text-sm sm:text-md leading-5 sm:leading-6 text-gray-500">
      <p class="text-center pb-4 text-blue-400">
        <span>
          <a href="https://<?php echo $currentDomain; ?>/terms" target="_blank">Privacy Policy</a>
          |
          <a href="https://<?php echo $currentDomain; ?>/privacy" target="_blank">Terms &amp; Conditions</a>
          |
          <a href="https://<?php echo $currentDomain; ?>/privacy.php#caresidents" target="_blank">CCPA</a></span>
      </p>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>

  <script type="text/javascript" src="https://cdn.sppoints.xyz/track.js?rtkcmpid=<?php echo $rtkCmpId; ?>"></script>

</body>

<script>
  $(document).ready(function() {
    var tempCssClass;

    setTimeout(function() {
      $("#initTyping").remove();
      $("#msg1").removeClass("hidden").after(typingEffect());
      setTimeout(function() {
        $(".temp-typing").remove();
        $("#msg2").removeClass("hidden").after(typingEffect());
        scrollToBottom();
        setTimeout(function() {
          $(".temp-typing").remove();
          $("#msg3").removeClass("hidden").after(typingEffect());
          scrollToBottom();
          setTimeout(function() {
            $(".temp-typing").remove();
            $("#msg4").removeClass("hidden");
          }, 0);
        }, 1750);
      }, 1250);
    }, 750);

    var buttonValue;
    var currentStep;

    $("button.chat-button").on("click", function() {
      currentStep = $(this).attr("data-form-step");
      buttonValue = $(this).attr("data-form-value");

      if (currentStep == 1) {
        // Assume your anchor tag's href is something like /path?param1=value1
        var anchorTag = document.getElementById("rtRef");
        var anchorUrl = new URL(anchorTag.href);
        var anchorParams = new URLSearchParams(anchorUrl.search);

        // Assume your window location is something like /path?param2=value2
        var windowUrl = new URL(window.location.href);
        var windowParams = new URLSearchParams(windowUrl.search);

        // Append params from the anchor tag to the main URL's params
        for (let pair of anchorParams.entries()) {
          windowParams.append(pair[0], pair[1]);
        }

        // Set the window's location search params
        windowUrl.search = windowParams.toString();
        history.replaceState({}, "", windowUrl.toString());

        //scrollToBottom();
        $("#agentBlock2 .agent-chat").prepend(typingEffect());
        $("#msg4").addClass("hidden");
        $("#userBlock1").removeClass("hidden");
        scrollToBottom();
        setTimeout(function() {
          $("#agentBlock2").removeClass("hidden");
          scrollToBottom();
          setTimeout(function() {
            $(".temp-typing").remove();
            $("#msg6").removeClass("hidden").after(typingEffect());
            scrollToBottom();
            setTimeout(function() {
              $(".temp-typing").remove();
              $("#msg7").removeClass("hidden").after(typingEffect());
              scrollToBottom();
              setTimeout(function() {
                $(".temp-typing").remove();
                $("#msg8").removeClass("hidden");
                scrollToBottom();
              }, 0);
            }, 1750);
          }, 2250);
        }, 50);
      }

      if (currentStep == 2) {
        //scrollToBottom();
        $("#agentBlock3 .agent-chat").prepend(typingEffect());
        $("#msg8").addClass("hidden");
        $("#userBlock2").removeClass("hidden");
        setRtClickId()
        //scrollToBottom();
        if (buttonValue == "under") {
          $("#msg9yes").removeClass("hidden");

          var windowUrl = new URL(window.location.href);
          var windowParams = new URLSearchParams(windowUrl.search);

          // Append params from the anchor tag to the main URL's params
          windowParams.append("age", "64");

          // Set the window's location search params
          windowUrl.search = windowParams.toString();
          history.replaceState({}, "", windowUrl.toString());
          $("#hdnApprovalStatus").val("no");
        } else {
          $("#msg9no").removeClass("hidden");

          var windowUrl = new URL(window.location.href);
          var windowParams = new URLSearchParams(windowUrl.search);

          // Append params from the anchor tag to the main URL's params
          windowParams.append("age", "76");

          // Set the window's location search params
          windowUrl.search = windowParams.toString();
          history.replaceState({}, "", windowUrl.toString());
          $("#hdnApprovalStatus").val("no");
        }
        scrollToBottom();
        setTimeout(function() {
          $("#agentBlock3").removeClass("hidden");
          scrollToBottom();
          setTimeout(function() {
            $(".temp-typing").remove();
            $("#msg10").removeClass("hidden").after(typingEffect());
            scrollToBottom();
            setTimeout(function() {
              $(".temp-typing").remove();
              $("#msg11").removeClass("hidden");
              scrollToBottom();
            }, 0);
          }, 1750);
        }, 50);
      }
      if (currentStep == 3) {
        //scrollToBottom();
        $("#agentBlock4 .agent-chat").prepend(typingEffect());
        $("#msg11").addClass("hidden");
        $("#userBlock3").removeClass("hidden");
        //scrollToBottom();
        if (buttonValue == "Yes") {
          $("#msg12yes").removeClass("hidden");
        } else if (buttonValue == "No") {
          $("#msg12no").removeClass("hidden");
          $("#hdnApprovalStatus").val("no");

          setTimeout(function() {
            $("#agentBlock4").removeClass("hidden");
            scrollToBottom();
            setTimeout(function() {
              $(".temp-typing").remove();
              $("#msg18").removeClass("hidden").after(typingEffect());
              scrollToBottom();
              setTimeout(function() {
                $(".temp-typing").remove();
                $("#msg19").removeClass("hidden");
                scrollToBottom();
                setTimeout(function() {
                  $(".temp-typing").remove();
                  $("#msg20").removeClass("hidden");
                  console.log("here");
                  scrollToBottom();
                  setTimeout(function() {
                    $("#disconnected").removeClass("hidden");
                    scrollToBottom();
                  }, 1250);
                }, 1250);
              }, 1250);
            }, 1250);
          }, 1250);
          return false;
        } else {
          $("#msg12medicare").removeClass("hidden");
          setTimeout(function() {
            $("#agentBlock4").removeClass("hidden");
            scrollToBottom();
            setTimeout(function() {
              $(".temp-typing").remove();
              $("#msg18").removeClass("hidden").after(typingEffect());
              scrollToBottom();
              setTimeout(function() {
                $(".temp-typing").remove();
                $("#msg19").removeClass("hidden");
                scrollToBottom();
                setTimeout(function() {
                  $(".temp-typing").remove();
                  $("#msg20").removeClass("hidden");
                  scrollToBottom();
                  setTimeout(function() {
                    $("#disconnected").removeClass("hidden");
                    scrollToBottom();
                  }, 1250);
                }, 1250);
              }, 1250);
            }, 1250);
          }, 1250);
          return false;
        }
        scrollToBottom();
        //

        if ($("#hdnApprovalStatus").val() == "no") {
          //downsell
          $("#DownsellNumber").removeClass("hidden");
          $("#msg14disapproved").removeClass("hidden");
          $("#msg16disapproved").removeClass("hidden");
          loadRingba()
        } else {
          //standard aca
          $("#PrimaryNumber").removeClass("hidden");
          loadRingba()
          $("#msg14approved").removeClass("hidden");
          $("#msg16approved").removeClass("hidden");
        }
        scrollToBottom();
        //
        setTimeout(function() {
          $("#agentBlock4").removeClass("hidden");
          scrollToBottom();
          setTimeout(function() {
            $(".temp-typing").remove();
            $("#msg13").removeClass("hidden").after(typingEffect());
            scrollToBottom();
            setTimeout(function() {
              $(".temp-typing").remove();
              $("#msg14").removeClass("hidden").after(typingEffect());
              scrollToBottom();
              setTimeout(function() {
                $(".temp-typing").remove();
                $("#msg15").removeClass("hidden").after(typingEffect());
                scrollToBottom();
                setTimeout(function() {
                  $(".temp-typing").remove();
                  $("#msg16").removeClass("hidden").after(typingEffect());
                  scrollToBottom();
                  setTimeout(function() {
                    $(".temp-typing").remove();
                    $("#msg17").removeClass("hidden");
                    //$('#tcpa').removeClass('hidden');
                    scrollToBottom();
                  }, 0);
                }, 2250);
              }, 1250);
            }, 1750);
          }, 1250);
        }, 250);
      }
    });

    function scrollToBottom(elementId) {
      var object = $("main");
      $("html, body").animate({
          scrollTop: object.offset().top + object.outerHeight() - $(window).height(),
        },
        "fast"
      );
    }
  });

  function typingEffect(cssClass) {
    string = '<div class="temp-typing bg-gray-200 p-3 rounded-lg shadow-xs mt-2 inline-block">';
    string += '<div class="typing-animation">';
    string += '<div class="typing-dot"></div>';
    string += '<div class="typing-dot"></div>';
    string += '<div class="typing-dot"></div>';
    string += "</div>";
    string += "</div>";

    return string;
  }

  var daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
  var months = [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December",
  ];

  var currentDate = new Date();
  var currentDayOfWeek = daysOfWeek[currentDate.getDay()];
  var currentMonth = months[currentDate.getMonth()];
  var currentDay = currentDate.getDate();
  var currentYear = currentDate.getFullYear();
  var formattedDate =
    currentDayOfWeek +
    ", " +
    ("0" + (currentDate.getMonth() + 1)).slice(-2) +
    "/" +
    ("0" + currentDay).slice(-2) +
    "/" +
    currentYear;
  document.getElementById("currentDate").textContent = formattedDate;




  const setRtClickId = () => {
    var anchorTag = document.getElementById("rtRef");
    var anchorUrl = new URL(anchorTag.href);
    var anchorParams = new URLSearchParams(anchorUrl.search);

    // Assume your window location is something like /path?param2=value2
    var windowUrl = new URL(window.location.href);
    var windowParams = new URLSearchParams(windowUrl.search);

    windowUrl.searchParams.set('age', '64');
    window.history.pushState({
      path: windowUrl.toString()
    }, '', windowUrl.toString());
    // Append params from the anchor tag to the main URL's params
    for (let pair of anchorParams.entries()) {
      windowParams.append(pair[0], pair[1]);
    }

    // Set the window's location search params
    windowUrl.search = windowParams.toString();
    history.replaceState({}, "", windowUrl.toString());

  }

  const loadRingba = () => {
    var script = document.createElement("script");
    script.src =
      "<?php echo $ringbaScriptPrimary; ?>";
    document.head.appendChild(script);
  }
</script>

</html>